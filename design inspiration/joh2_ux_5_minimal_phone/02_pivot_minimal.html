<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Joh 2 – Ansatz 2: Pivot</title>
  <style>
    /* Minimal, schwarz/weiß, mobile-first */
    :root {
      --pad: 10px;
      --gap: 8px;
      --line: 1px solid #000;
      --muted: #111;
      --fz: 15px;
      --fzSmall: 13px;
    }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      font-size: var(--fz);
      line-height: 1.25;
      color: #000;
      background: #fff;
      -webkit-text-size-adjust: 100%;
    }
    button, input, select, summary { font: inherit; color: inherit; }
    .app {
      height: 100vh;
      height: 100svh;
      padding: var(--pad);
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: var(--gap);
      overflow: hidden; /* wichtig: kein Scrollen */
    }
    .top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      min-height: 28px;
    }
    .navbtn {
      border: var(--line);
      background: #fff;
      padding: 2px 8px;
      border-radius: 6px;
    }
    .ref {
      font-weight: 600;
      letter-spacing: .2px;
      white-space: nowrap;
    }
    .tiny {
      font-size: var(--fzSmall);
      color: var(--muted);
    }
    .divider { border-top: var(--line); opacity: 1; }
    
  .core { display: grid; gap: var(--gap); }
  .box { border: var(--line); border-radius: 8px; padding: 6px; }
  .lbl { font-weight: 600; font-size: var(--fzSmall); }
  .val { margin-top: 2px; }
  .piv { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 6px; }
  .pbtn { border: var(--line); background: #fff; padding: 4px 6px; border-radius: 8px; font-size: var(--fzSmall); }
  .pbtn[aria-selected="true"] { font-weight: 700; }
  .panel { border: var(--line); border-radius: 8px; padding: 6px; min-height: 22vh; overflow: hidden; }

  </style>
</head>
<body>
  
<div class="app" id="app">
  <div class="top">
    <button class="navbtn" id="prev" aria-label="Vorheriger Vers">‹</button>
    <div class="ref" id="ref">–</div>
    <button class="navbtn" id="next" aria-label="Nächster Vers">›</button>
  </div>

  <div class="core">
    <div class="box">
      <div class="lbl">Griechisch</div>
      <div class="val" id="greek"></div>
    </div>
    <div class="box">
      <div class="lbl">Wörtlich</div>
      <div class="val" id="literal"></div>
    </div>
  </div>

  <div class="divider"></div>

  <div class="piv" role="tablist" aria-label="Ansicht wählen">
    <button class="pbtn" data-k="extreme" id="bExt" role="tab" aria-selected="true">Freier Satz</button>
    <button class="pbtn" data-k="notes" id="bNotes" role="tab" aria-selected="false">Analyse</button>
    <button class="pbtn" data-k="vocab" id="bVocab" role="tab" aria-selected="false">Vokabeln</button>
  </div>

  <div class="panel" id="panel" role="tabpanel" aria-live="polite"></div>

  <div class="tiny">
    Idee: „Kern“ bleibt immer sichtbar, nur die dritte Ebene wechselt. Damit passt alles auf einen Screen.
  </div>
</div>

  <script>
    const DATA = [{"ref": "Joh 2,1", "greek": "Καὶ τῇ ἡμέρᾳ τῇ τρίτῃ γάμος ἐγένετο ἐν Κανᾷ τῆς Γαλιλαίας· καὶ ἦν ἡ μήτηρ τοῦ Ἰησοῦ ἐκεῖ.", "literal": "Und am dritten Tag geschah eine Hochzeit in Kana in Galiläa; und die Mutter Jesu war dort.", "extreme": "Drei Tage später: Hochzeit in Kana. Maria ist schon da.", "notes": "Setting/Ort. Maria wird eingeführt. „Dritter Tag“ kann literarisch den Übergang markieren.", "vocab": "γάμος=Hochzeit; Κανᾷ=Kana; Γαλιλαίας=Galiläa; μήτηρ=Mutter"}, {"ref": "Joh 2,2", "greek": "ἐκλήθη δὲ καὶ ὁ Ἰησοῦς καὶ οἱ μαθηταὶ αὐτοῦ εἰς τὸν γάμον.", "literal": "Es wurde aber auch Jesus und seine Jünger zur Hochzeit eingeladen.", "extreme": "Jesus und seine Jünger sind eingeladen.", "notes": "Motiv: öffentliche Teilnahme. „Jünger“ als bereits bestehender Kreis.", "vocab": "ἐκλήθη=eingeladen; μαθηταὶ=Jünger; εἰς=zu/in"}, {"ref": "Joh 2,3", "greek": "καὶ ὑστερήσαντος οἴνου λέγει ἡ μήτηρ τοῦ Ἰησοῦ πρὸς αὐτόν· Οἶνον οὐκ ἔχουσιν.", "literal": "Und als der Wein ausging, sagt die Mutter Jesu zu ihm: Sie haben keinen Wein.", "extreme": "Der Wein wird knapp. Maria: „Die haben keinen Wein mehr.“", "notes": "Konflikt/Problem. Maria beobachtet und adressiert Jesus indirekt.", "vocab": "οἶνος=Wein; ὑστερέω=fehlen/ausgehen; οὐκ ἔχουσιν=haben nicht"}, {"ref": "Joh 2,4", "greek": "καὶ λέγει αὐτῇ ὁ Ἰησοῦς· Τί ἐμοὶ καὶ σοί, γύναι; οὔπω ἥκει ἡ ὥρα μου.", "literal": "Und Jesus sagt zu ihr: Was ist mir und dir, Frau? Meine Stunde ist noch nicht gekommen.", "extreme": "Jesus: „Was willst du von mir? Es ist noch nicht meine Zeit.“", "notes": "Johanneisches Motiv „Stunde“. Die Anrede „γύναι“ ist höflich, kann aber distanziert wirken.", "vocab": "Τί ἐμοὶ καὶ σοί=Was (ist) mir und dir; γύναι=Frau; ὥρα=Stunde"}, {"ref": "Joh 2,5", "greek": "λέγει ἡ μήτηρ αὐτοῦ τοῖς διακόνοις· Ὅ τι ἂν λέγῃ ὑμῖν ποιήσατε.", "literal": "Seine Mutter sagt zu den Dienern: Was immer er euch sagt, das tut.", "extreme": "Maria zu den Helfern: „Macht einfach, was er sagt.“", "notes": "Maria initiiert Gehorsam/Vertrauen. Übergang zum Handeln (Zeichen).", "vocab": "διάκονοι=Diener/Helfer; Ὅ τι ἂν=was auch immer; ποιήσατε=tut!"}];
    const clamp = (s, n=140) => (s.length<=n? s : s.slice(0, n-1) + "…");
    const save = (k,v)=>localStorage.setItem(k, JSON.stringify(v));
    const load = (k,def)=>{ try { const v=JSON.parse(localStorage.getItem(k)); return (v??def); } catch(e){ return def; } };
    
  let idx = load('joh2_idx_pivot', 0);
  let mode = load('joh2_mode_pivot', 'extreme');

  const $ = (id)=>document.getElementById(id);

  function setMode(k) {
    mode = k;
    save('joh2_mode_pivot', mode);
    document.querySelectorAll('.pbtn').forEach(b => b.setAttribute('aria-selected', String(b.dataset.k === mode)));
    renderPanel();
  }

  function renderCore() {
    const v = DATA[idx];
    $('ref').textContent = v.ref;
    $('greek').textContent = v.greek;
    $('literal').textContent = v.literal;
  }

  function renderPanel() {
    const v = DATA[idx];
    const map = { extreme: v.extreme, notes: v.notes, vocab: "Vokabeln: " + v.vocab };
    $('panel').textContent = map[mode] ?? "";
  }

  function render() { renderCore(); renderPanel(); save('joh2_idx_pivot', idx); }

  document.querySelectorAll('.pbtn').forEach(b => b.addEventListener('click', ()=>setMode(b.dataset.k)));

  $('prev').addEventListener('click', () => { idx = (idx - 1 + DATA.length) % DATA.length; render(); });
  $('next').addEventListener('click', () => { idx = (idx + 1) % DATA.length; render(); });

  // swipe
  let x0 = null;
  document.addEventListener('touchstart', (e)=>{ x0 = e.touches[0].clientX; }, {passive:true});
  document.addEventListener('touchend', (e)=>{
    if (x0 == null) return;
    const dx = e.changedTouches[0].clientX - x0;
    if (Math.abs(dx) > 60) { dx < 0 ? $('next').click() : $('prev').click(); }
    x0 = null;
  }, {passive:true});

  setMode(mode);
  render();

  </script>
</body>
</html>
