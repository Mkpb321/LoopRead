<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Joh 2 – Ansatz 4: Flashcard</title>
  <style>
    /* Minimal, schwarz/weiß, mobile-first */
    :root {
      --pad: 10px;
      --gap: 8px;
      --line: 1px solid #000;
      --muted: #111;
      --fz: 15px;
      --fzSmall: 13px;
    }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      font-size: var(--fz);
      line-height: 1.25;
      color: #000;
      background: #fff;
      -webkit-text-size-adjust: 100%;
    }
    button, input, select, summary { font: inherit; color: inherit; }
    .app {
      height: 100vh;
      height: 100svh;
      padding: var(--pad);
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: var(--gap);
      overflow: hidden; /* wichtig: kein Scrollen */
    }
    .top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      min-height: 28px;
    }
    .navbtn {
      border: var(--line);
      background: #fff;
      padding: 2px 8px;
      border-radius: 6px;
    }
    .ref {
      font-weight: 600;
      letter-spacing: .2px;
      white-space: nowrap;
    }
    .tiny {
      font-size: var(--fzSmall);
      color: var(--muted);
    }
    .divider { border-top: var(--line); opacity: 1; }
    
  .card { border: var(--line); border-radius: 10px; padding: 10px; flex: 1; display: grid; align-content: start; overflow: hidden; }
  .face { display: grid; gap: 6px; }
  .big { font-size: 18px; }
  .mid { }
  .hint { margin-top: auto; }
  .flip .front { display:none; }
  .flip .back { display:grid; }
  .back { display:none; }
  .peek { border: var(--line); border-radius: 10px; padding: 6px; display:flex; align-items:center; gap: 10px; }
  .peek .tiny { overflow:hidden; text-overflow: ellipsis; white-space: nowrap; }

  </style>
</head>
<body>
  
<div class="app" id="app">
  <div class="top">
    <button class="navbtn" id="prev" aria-label="Vorheriger Vers">‹</button>
    <div class="ref" id="ref">–</div>
    <button class="navbtn" id="next" aria-label="Nächster Vers">›</button>
  </div>

  <div class="card" id="card" role="button" tabindex="0" aria-label="Karte umdrehen">
    <div class="face front" id="front">
      <div class="ttl tiny">Griechisch</div>
      <div class="big" id="greek"></div>
      <div class="tiny hint">Tippe zum Umdrehen</div>
    </div>
    <div class="face back" id="back" aria-hidden="true">
      <div class="ttl tiny">Wörtlich</div>
      <div class="mid" id="literal"></div>
      <div class="ttl tiny">Freier Satz</div>
      <div class="mid" id="extreme"></div>
      <div class="tiny" id="notes"></div>
    </div>
  </div>

  <div class="peek">
    <button class="navbtn" id="btnVocab">Vokabeln</button>
    <div class="tiny" id="vocab" hidden></div>
  </div>

  <div class="tiny">
    Idee: Lern-/Kartenmodus. Ein Vers pro Screen, „Umdrehen“ statt Tabs. Optionaler Vokabel-Peek.
  </div>
</div>

  <script>
    const DATA = [{"ref": "Joh 2,1", "greek": "Καὶ τῇ ἡμέρᾳ τῇ τρίτῃ γάμος ἐγένετο ἐν Κανᾷ τῆς Γαλιλαίας· καὶ ἦν ἡ μήτηρ τοῦ Ἰησοῦ ἐκεῖ.", "literal": "Und am dritten Tag geschah eine Hochzeit in Kana in Galiläa; und die Mutter Jesu war dort.", "extreme": "Drei Tage später: Hochzeit in Kana. Maria ist schon da.", "notes": "Setting/Ort. Maria wird eingeführt. „Dritter Tag“ kann literarisch den Übergang markieren.", "vocab": "γάμος=Hochzeit; Κανᾷ=Kana; Γαλιλαίας=Galiläa; μήτηρ=Mutter"}, {"ref": "Joh 2,2", "greek": "ἐκλήθη δὲ καὶ ὁ Ἰησοῦς καὶ οἱ μαθηταὶ αὐτοῦ εἰς τὸν γάμον.", "literal": "Es wurde aber auch Jesus und seine Jünger zur Hochzeit eingeladen.", "extreme": "Jesus und seine Jünger sind eingeladen.", "notes": "Motiv: öffentliche Teilnahme. „Jünger“ als bereits bestehender Kreis.", "vocab": "ἐκλήθη=eingeladen; μαθηταὶ=Jünger; εἰς=zu/in"}, {"ref": "Joh 2,3", "greek": "καὶ ὑστερήσαντος οἴνου λέγει ἡ μήτηρ τοῦ Ἰησοῦ πρὸς αὐτόν· Οἶνον οὐκ ἔχουσιν.", "literal": "Und als der Wein ausging, sagt die Mutter Jesu zu ihm: Sie haben keinen Wein.", "extreme": "Der Wein wird knapp. Maria: „Die haben keinen Wein mehr.“", "notes": "Konflikt/Problem. Maria beobachtet und adressiert Jesus indirekt.", "vocab": "οἶνος=Wein; ὑστερέω=fehlen/ausgehen; οὐκ ἔχουσιν=haben nicht"}, {"ref": "Joh 2,4", "greek": "καὶ λέγει αὐτῇ ὁ Ἰησοῦς· Τί ἐμοὶ καὶ σοί, γύναι; οὔπω ἥκει ἡ ὥρα μου.", "literal": "Und Jesus sagt zu ihr: Was ist mir und dir, Frau? Meine Stunde ist noch nicht gekommen.", "extreme": "Jesus: „Was willst du von mir? Es ist noch nicht meine Zeit.“", "notes": "Johanneisches Motiv „Stunde“. Die Anrede „γύναι“ ist höflich, kann aber distanziert wirken.", "vocab": "Τί ἐμοὶ καὶ σοί=Was (ist) mir und dir; γύναι=Frau; ὥρα=Stunde"}, {"ref": "Joh 2,5", "greek": "λέγει ἡ μήτηρ αὐτοῦ τοῖς διακόνοις· Ὅ τι ἂν λέγῃ ὑμῖν ποιήσατε.", "literal": "Seine Mutter sagt zu den Dienern: Was immer er euch sagt, das tut.", "extreme": "Maria zu den Helfern: „Macht einfach, was er sagt.“", "notes": "Maria initiiert Gehorsam/Vertrauen. Übergang zum Handeln (Zeichen).", "vocab": "διάκονοι=Diener/Helfer; Ὅ τι ἂν=was auch immer; ποιήσατε=tut!"}];
    const clamp = (s, n=140) => (s.length<=n? s : s.slice(0, n-1) + "…");
    const save = (k,v)=>localStorage.setItem(k, JSON.stringify(v));
    const load = (k,def)=>{ try { const v=JSON.parse(localStorage.getItem(k)); return (v??def); } catch(e){ return def; } };
    
  let idx = load('joh2_idx_flash', 0);
  let flipped = load('joh2_flip', false);
  let showVocab = load('joh2_vocab_show', false);

  const $ = (id)=>document.getElementById(id);
  const root = document.getElementById('app');

  function render() {
    const v = DATA[idx];
    $('ref').textContent = v.ref;
    $('greek').textContent = v.greek;
    $('literal').textContent = v.literal;
    $('extreme').textContent = v.extreme;
    $('notes').textContent = "Analyse: " + v.notes;
    $('vocab').textContent = v.vocab;
    $('vocab').hidden = !showVocab;

    root.classList.toggle('flip', flipped);
    save('joh2_idx_flash', idx);
    save('joh2_flip', flipped);
    save('joh2_vocab_show', showVocab);
  }

  function toggleFlip() { flipped = !flipped; render(); }

  $('card').addEventListener('click', toggleFlip);
  $('card').addEventListener('keydown', (e)=>{ if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleFlip(); }});
  $('btnVocab').addEventListener('click', ()=>{ showVocab = !showVocab; render(); });

  $('prev').addEventListener('click', () => { idx = (idx - 1 + DATA.length) % DATA.length; flipped=false; render(); });
  $('next').addEventListener('click', () => { idx = (idx + 1) % DATA.length; flipped=false; render(); });

  let x0 = null;
  document.addEventListener('touchstart', (e)=>{ x0 = e.touches[0].clientX; }, {passive:true});
  document.addEventListener('touchend', (e)=>{
    if (x0 == null) return;
    const dx = e.changedTouches[0].clientX - x0;
    if (Math.abs(dx) > 60) { dx < 0 ? $('next').click() : $('prev').click(); }
    x0 = null;
  }, {passive:true});

  render();

  </script>
</body>
</html>
